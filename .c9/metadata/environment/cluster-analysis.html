{"filter":false,"title":"cluster-analysis.html","tooltip":"/cluster-analysis.html","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":460,"column":7},"action":"remove","lines":["<!DOCTYPE html>","<html>","<head>","\t<script src=\"https://d3js.org/d3.v5.min.js\"></script>","\t<link href=\"https://fonts.googleapis.com/css?family=Heebo:100,300,300i, 400\" rel=\"stylesheet\">","\t<link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">","\t<title></title>","<style>","body, html {","\tfont-family:'Heebo', sans-serif;","\ttop:0;","\tleft:0;","\tmargin:0;","\tscroll-snap-type: y mandatory;","}",".content {","\theight:fit-content;","}",".content img {","\theight:10vh;","\twidth:auto;","\tdisplay:inline-block;","\tcursor:pointer;","\tmix-blend-mode: multiply;","}",".holder {","\tdisplay:inline-block;","\tmargin:1%;","\tmix-blend-mode: multiply;","\ttransition:0.25s all ease-in-out;","}","p {","\tfont-size:0.8em;","\tfont-weight:300;","}","i {","\tbackground-color:#666666;","\tborder-radius:50%;","\tpadding:3%;","}",".play {","\tdisplay:inline-block;","\tmargin-left:2%;","\tmix-blend-mode:multiply;","\tcursor:pointer;","\ttransition:0.5s all ease-in-out;","\ttransform-origin:50% 50%;","\tvertical-align:middle;","}",".play:hover {","\ttransform:scale(1.1);","}",".holder:hover {","\ttransform-origin:50% 50%;","\ttransform:scale(1.5);","}",".tooltip {","\topacity:0;","\tposition:fixed;","\twidth:5em;","\theight:auto;","\tz-index:100;","\tbackground-color:#F2F2F2;","\tborder:0.05em #CCCCCC;","\tborder-radius:0.2em;","\tpointer-events:none;","\ttransition:0.25s all ease-in-out;","\tpadding:2%;","\tcolor:#1d1d1d;","}",".tooltip em {","\tdisplay:inline-block;","\tfont-style:normal;","\tpadding-right:5%;","\tline-height:0.2em;","}",".tooltip p {","\tdisplay:inline-block;","\tline-height:0.2em;","}",".item {","\tdisplay:block;","\tfont-size:0.8em;","}","h1 {","\tdisplay:inline-block;","\tvertical-align:middle;","\tfont-size:5em;","\tfont-weight:900;","\tletter-spacing:-0.05em;","\ttext-align:center;","\tcolor:#F2F2F2;","\twidth:100%;","}",".identity {","\tdisplay:inline-block;","\tposition:absolute;","\twidth:100%;","\tvertical-align:middle;","\tz-index:-1;","}",".cluster {","\tpadding:2%;","\tmargin:0%;","\tmargin-bottom:0%;","\tmargin-top:0%;","\toverflow:hidden;","\tposition:relative;","\theight:100vh;","\tscroll-snap-align: center;","}",".model {","\twidth:100%;","\tmargin:auto;","\tmargin-top:0%;","\tcolor:#1d1d1d;","}",".feature {","\twidth:20%;","\tdisplay:inline-block;","\tvertical-align:top;","\ttext-align:center;","}",".feature h2 {","\tfont-weight:100;","\tfont-size:1em;","\tletter-spacing:0.05em;","}",".feature p {","\tfont-size:5em;","\ttext-align:center;","\tdisplay:block;","\tline-height:1em;","\tmargin-top:3%;","<<<<<<< HEAD","=======","",">>>>>>> 7d2e1b98b78662fc8999ff26586b0d3b06856aa5","}",".button {","\twidth:fit-content;","\tposition:absolute;","\tbottom:20%;","\ttext-align:center;","\tpadding:1% 5%;","\tborder:0.05em solid #F2F2F2;","\tcolor:#F2F2F2;","\tborder-radius:2em;","\ttransition:0.25s all ease-in-out;","\tcursor:pointer;","}",".button:hover {","\tborder: 0.05em solid #D8A693;","\tbackground-color:#D8A693;","\tbox-shadow: 0em 0em 0.5em #CCCCCC;","\tcolor:white!important;","}","#main {","\tbackground-color:#D9AC9B;","\t\tdisplay: flex;","\tflex-direction: column;","\tjustify-content: center;","\talign-items: center;","\ttext-align: center;","}","#main img {","\twidth:100%;","\ttext-align:center;","\tmix-blend-mode:multiply;","}","#Melody {","\tbackground-color:#D9AC9B;","}","#Magic {","\tbackground-image: linear-gradient(#D9AC9B, #B9D9BB);","}","#Building {","\tbackground-image: linear-gradient(#B9D9BB, #FFCA90);","}","#Emerging {","\tbackground-image: linear-gradient(#FFCA90, #DAE2E7);","}","#Drama {","\tbackground-image: linear-gradient(#DAE2E7, #C7B299);","}","</style>","</head>","<<<<<<< HEAD","","<body>","\t<div class=\"tooltip\"></div>","\t<audio src=\"assets/music.wav\"></audio>","\t<div class=\"cluster\" id=\"main\">","\t\t<h1>Cluster Analysis</h1>","\t\t<div class=\"model\">","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Musical Notation</h2>","\t\t\t\t<img src=\"assets/images/feature_transformation.png\">","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Timestamp</h2>","\t\t\t\t<p>2.28</p>","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Measure</h2>","\t\t\t\t<p>2</p>","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Beat</h2>","\t\t\t\t<p>3</p>","\t\t\t</div>","\t\t</div>","","=======","","<body>","\t<div class=\"tooltip\"></div>","\t<audio src=\"assets/music.wav\"></audio>","\t<div class=\"cluster\" id=\"main\">","\t\t<h1>Cluster Analysis</h1>","\t\t<div class=\"model\">","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Musical Notation</h2>","\t\t\t\t<img src=\"assets/images/feature_transformation.png\">","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Timestamp</h2>","\t\t\t\t<p>2.28</p>","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Measure</h2>","\t\t\t\t<p>2</p>","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Beat</h2>","\t\t\t\t<p>3</p>","\t\t\t</div>","\t\t</div>","",">>>>>>> 7d2e1b98b78662fc8999ff26586b0d3b06856aa5","\t\t<div class=\"button\">View Clusters</div>","\t</div>","</body>","","<<<<<<< HEAD","<script type=\"text/javascript\" src=\"js/cluster.js\"></script>","=======","<script>","","timecodes = [];","melody = [];","magic = [];","building = [];","emerging = [];","drama = [];","","d3.csv('data/cluster_results.csv')",".then(function(data) {","\tconsole.log(data)","\tshowClusters(data)","\tgetTimeCodes(data)","})",".catch(function(error){","})","setTimeout(function() {","\tconsole.log('fire it up')","\tgotoClusters();","},300)","","descriptions = [{0:\"Main melody line\"},{0:\"Main melody line supported by half or whole note chord progressions in the bass, as well as gentle crescendos and descrescendos climaxing at whole notes\"}, {0: \"Modified with sharps and flats outside of the key supported by mostly quarter notes on the bass clef in later parts of the piece\"}, {0: \"Modified with sharps and flats outside of the key and supported by triplets, half or whole notes in crescendo or descrendo in earlier parts of the piece, and/or parts demarcated with forte or fortepiano\"}, {0:\"Modified with eighth note progressions in the treble clef with half and eight note progressions in the bass clef, eighth rests, and sharp accents\"}]","console.log(descriptions[0])","","function getTimeCodes(data){","\tformatTime = d3.format(\",.2f\");","\tfor(i=0;i<data.length;i++){","\t\tid = 'beat' + data[i]['img']","\t\tmeasure = data[i]['measure']","\t\tbeat = data[i]['beat']","\t\tstart = data[i]['timestamp']","\t\tend =data[i+1]['timestamp']","\t\tstart = parseFloat(formatTime(start))","\t\tend = parseFloat(formatTime(end-0.01))","\t\ttimecodes.push({","\t\t\tid: id,","\t\t\tmeasure: measure,","\t\t\tbeat: beat,","\t\t\tstart: start,","\t\t\tend: end","\t\t})","\t}","}","","function gotoClusters() {","\tbody = document.querySelector('body')","\tbutton = document.querySelector('.button');","\tbutton.onclick=function() {","\t\tmelody = document.querySelector('#Melody')","\t\ttarget = window.innerHeight;","\t\twindow.scrollTo({","\t\t  top: target,","\t\t  behavior:'smooth'","\t\t});","\t}","}","","function playAudioSprite(){","\tholders = document.querySelectorAll('.holder')","","\taudio = document.querySelector('audio')","\tfor(i=0;i<holders.length;i++){","\t\tholders[i].onmouseover=function() {","\t\t\t// play audio sprite","\t\t\tid = this.id","\t\t\tsprite = timecodes.filter(function(d){return d.id==id})","\t\t\tconsole.log(sprite)","\t\t\taudio.src='assets/music.wav#t='+sprite[0]['start']+\",\"+sprite[0]['end']","\t\t\tconsole.log(audio.src)","\t\t\taudio.play();","\t\t\t// show tooltip info","\t\t\tshowTooltip(sprite)","\t\t}","\t\tholders[i].onmouseout=function() {","\t\t\thideTooltip();","\t\t}","\t}","}","","function playClusterScore() {","\tplays = document.querySelectorAll('.play')","\tfor(i=0;i<plays.length;i++){","\t\tparent = plays[i].parentElement.parentElement","\t\tcontent = parent.querySelector('.content')","\t\tbeats = content.querySelectorAll('div');","\t\tfor (j=0;j<beats.length;j++){","\t\t\tid = beats[j].id","\t\t\tconsole.log(id)","\t\t\tsegment = timecodes.filter(function(d){return d.id==id})","\t\t\tconsole.log(segment)","\t\t\tsrc = 'assets/music.wav#t='+ segment[0]['start'] + \",\" + segment[0]['end']","\t\t\t// if(i==0){","\t\t\t// \tmelody.push({","\t\t\t// \t\tid:id,","\t\t\t// \t\tsrc: src","\t\t\t// \t})","\t\t\t// } else if (i==1){","\t\t\t// \tmagic.push({","\t\t\t// \t\tid:id,","\t\t\t// \t\tsrc: src","\t\t\t// \t})","\t\t\t// } else if (i==2){","\t\t\t// \tbuilding.push({","\t\t\t// \t\tid:id,","\t\t\t// \t\tsrc: src","\t\t\t// \t})","\t\t\t// } else if (i==3){","\t\t\t// \temerging.push({","\t\t\t// \t\tid:id,","\t\t\t// \t\tsrc: src","\t\t\t// \t})","\t\t\t// } else if (i==4){","\t\t\t// \tdrama.push({","\t\t\t// \t\tid:id,","\t\t\t// \t\tsrc: src","\t\t\t// \t})","\t\t\t// }","\t\t}","\t}","}","","function getpos(event) {","\tvar e = window.event;","\tx = e.clientX + \"px\";","\ty = e.clientY + \"px\";","}","","function showTooltip(data){","\ttooltip = document.querySelector('.tooltip')","\tmeasure = \"<div class='item'><em>Measure</em><p>\"+sprite[0]['measure']+\"</p></div>\"","\tbeat = \"<div class='item'><em>Beat</em><p>\"+sprite[0]['beat']+\"</p></div>\"","\tstart = \"<div class='item'><em>Start</em><p>\"+sprite[0]['start']+\"</p></div>\"","\tend = \"<div class='item'><em>End</em><p>\"+sprite[0]['end']+\"</p></div>\"","\ttooltip.innerHTML+=measure","\ttooltip.innerHTML+=beat","\ttooltip.innerHTML+=start","\ttooltip.innerHTML+=end","\tgetpos()","\ttooltip.style.opacity=\"0.9\";","  \ttooltip.style.left=x;","  \ttooltip.style.top=y;","}","","function hideTooltip(){","\ttooltip = document.querySelector('.tooltip')","\ttooltip.innerHTML=\"\"","\ttooltip.style.opacity=\"0\";","}","","function showClusters(data){","\tcluster0 = data.filter(function(d){return d.labels==0})","\tcluster1 = data.filter(function(d){return d.labels==1})","\tcluster2 = data.filter(function(d){return d.labels==2})","\tcluster3 = data.filter(function(d){return d.labels==3})","\tcluster4 = data.filter(function(d){return d.labels==4})","","\tgetCluster(cluster0, 0)","\tgetCluster(cluster1, 1)","\tgetCluster(cluster2, 2)","\tgetCluster(cluster3, 3)","\tgetCluster(cluster4, 4)","","\tfunction getCluster(cluster, num){","\t\ttarget = document.querySelector('body')","\t\tdiv = document.createElement('div')","\t\tdiv.setAttribute(\"class\",\"cluster\")","\t\th1 = document.createElement('h1')","\t\tif(num==0){","\t\t\tname = 'Melody'","\t\t} else if (num ==1){","\t\t\tname = 'Magic'","\t\t} else if (num ==2){","\t\t\tname = 'Building'","\t\t} else if (num == 3){","\t\t\tname = 'Emerging'","\t\t} else if (num == 4){","\t\t\tname = 'Drama'","\t\t}","\t\tdiv.setAttribute('id', name)","\t\th1.innerHTML=name","\t\tplay = document.createElement('div')","\t\tplay.setAttribute(\"class\", \"play\")","\t\tplay.innerHTML=\"<i class='material-icons'>play_arrow</i>\"","\t\tidentity = document.createElement('img')","\t\tidentity.setAttribute(\"class\",\"identity\")","\t\tidentity.src =\"assets/images/cluster\"+num+\".png\"","\t\tp = document.createElement('p');","\t\tp.innerHTML=descriptions[num][0]","\t\tcontent = document.createElement('div')","\t\tcontent.setAttribute(\"class\",\"content\")","\t\tfor(i=0;i<cluster.length;i++){","\t\t\tholder = document.createElement('div')","\t\t\tholder.setAttribute('id', 'beat'+cluster[i]['img'])","\t\t\tholder.setAttribute('class', 'holder')","\t\t\timg = document.createElement('img')","\t\t\timg.src=\"assets/cropped/500w/\"+cluster[i]['img']+\".png\"","\t\t\tholder.appendChild(img)","\t\t\tcontent.appendChild(holder)","\t\t}","\t\t// div.appendChild(identity)","\t\th1.appendChild(play)","\t\tdiv.appendChild(h1)","\t\tdiv.appendChild(p)","\t\tdiv.appendChild(content)","\t\ttarget.appendChild(div)","\t}","\tplayAudioSprite();","\tplayClusterScore();","\t","}","</script>",">>>>>>> 7d2e1b98b78662fc8999ff26586b0d3b06856aa5","</html>"],"id":2},{"start":{"row":0,"column":0},"end":{"row":213,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html>","<head>","\t<script src=\"https://d3js.org/d3.v5.min.js\"></script>","\t<link href=\"https://fonts.googleapis.com/css?family=Heebo:100,300,300i, 400\" rel=\"stylesheet\">","\t<link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">","\t<title></title>","<style>","body, html {","\tfont-family:'Heebo', sans-serif;","\ttop:0;","\tleft:0;","\tmargin:0;","\tscroll-snap-type: y mandatory;","}",".content {","\theight:fit-content;","}",".content img {","\theight:10vh;","\twidth:auto;","\tdisplay:inline-block;","\tcursor:pointer;","\tmix-blend-mode: multiply;","}",".holder {","\tdisplay:inline-block;","\tmargin:1%;","\tmix-blend-mode: multiply;","\ttransition:0.25s all ease-in-out;","}","p {","\tfont-size:0.8em;","\tfont-weight:300;","}","i {","\tbackground-color:#666666;","\tborder-radius:50%;","\tpadding:3%;","}",".play {","\tdisplay:inline-block;","\tmargin-left:2%;","\tmix-blend-mode:multiply;","\tcursor:pointer;","\ttransition:0.5s all ease-in-out;","\ttransform-origin:50% 50%;","\tvertical-align:middle;","}",".play:hover {","\ttransform:scale(1.1);","}",".holder:hover {","\ttransform-origin:50% 50%;","\ttransform:scale(1.5);","}",".tooltip {","\topacity:0;","\tposition:fixed;","\twidth:5em;","\theight:auto;","\tz-index:100;","\tbackground-color:#F2F2F2;","\tborder:0.05em #CCCCCC;","\tborder-radius:0.2em;","\tpointer-events:none;","\ttransition:0.25s all ease-in-out;","\tpadding:2%;","\tcolor:#1d1d1d;","}",".tooltip em {","\tdisplay:inline-block;","\tfont-style:normal;","\tpadding-right:5%;","\tline-height:0.2em;","}",".tooltip p {","\tdisplay:inline-block;","\tline-height:0.2em;","}",".item {","\tdisplay:block;","\tfont-size:0.8em;","}","h1 {","\tdisplay:inline-block;","\tvertical-align:middle;","\tfont-size:5em;","\tfont-weight:900;","\tletter-spacing:-0.05em;","\ttext-align:center;","\tcolor:#F2F2F2;","\twidth:100%;","}",".identity {","\tdisplay:inline-block;","\tposition:absolute;","\twidth:100%;","\tvertical-align:middle;","\tz-index:-1;","}",".cluster {","\tpadding:2%;","\tmargin:0%;","\tmargin-bottom:0%;","\tmargin-top:0%;","\toverflow:hidden;","\tposition:relative;","\theight:100vh;","\tscroll-snap-align: center;","}",".model {","\twidth:100%;","\tmargin:auto;","\tmargin-top:0%;","\tcolor:#1d1d1d;","}",".feature {","\twidth:20%;","\tdisplay:inline-block;","\tvertical-align:top;","\ttext-align:center;","}",".feature h2 {","\tfont-weight:100;","\tfont-size:1em;","\tletter-spacing:0.05em;","}",".feature p {","\tfont-size:5em;","\ttext-align:center;","\tdisplay:block;","\tline-height:1em;","\tmargin-top:3%;","}",".button {","\twidth:fit-content;","\tposition:absolute;","\tbottom:20%;","\ttext-align:center;","\tpadding:1% 5%;","\tborder:0.05em solid #F2F2F2;","\tcolor:#F2F2F2;","\tborder-radius:2em;","\ttransition:0.25s all ease-in-out;","\tcursor:pointer;","}",".button:hover {","\tborder: 0.05em solid #D8A693;","\tbackground-color:#D8A693;","\tbox-shadow: 0em 0em 0.5em #CCCCCC;","\tcolor:white!important;","}","#main {","\tbackground-color:#D9AC9B;","\t\tdisplay: flex;","\tflex-direction: column;","\tjustify-content: center;","\talign-items: center;","\ttext-align: center;","}","#main img {","\twidth:100%;","\ttext-align:center;","\tmix-blend-mode:multiply;","}","#Melody {","\tbackground-image: linear-gradient(#D9AC9B, #B9D9BB);","}","#Magic {","\tbackground-image: linear-gradient(#B9D9BB, #FFCA90);","}","#Building {","\tbackground-image: linear-gradient(#FFCA90, #DAE2E7);","}","#Emerging {","\tbackground-image: linear-gradient(#DAE2E7, #C7B299);","}","#Drama {","\tbackground-image: linear-gradient(#C7B299, #1d1d1d);","}","</style>","</head>","","<body>","\t<div class=\"tooltip\"></div>","\t<audio src=\"assets/music.wav\"></audio>","\t<div class=\"cluster\" id=\"main\">","\t\t<h1>Cluster Analysis</h1>","\t\t<div class=\"model\">","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Musical Notation</h2>","\t\t\t\t<img src=\"assets/images/feature_transformation.png\">","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Timestamp</h2>","\t\t\t\t<p>2.28</p>","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Measure</h2>","\t\t\t\t<p>2</p>","\t\t\t</div>","\t\t\t<div class=\"feature\">","\t\t\t\t<h2>Beat</h2>","\t\t\t\t<p>3</p>","\t\t\t</div>","\t\t</div>","","\t\t<div class=\"button\">View Clusters</div>","\t</div>","</body>","","<script type=\"text/javascript\" src=\"js/cluster.js\"></script>","</html>"]}]]},"ace":{"folds":[],"scrolltop":3183.5,"scrollleft":0,"selection":{"start":{"row":213,"column":7},"end":{"row":213,"column":7},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":197,"state":"start","mode":"ace/mode/html"}},"timestamp":1561672525264,"hash":"47d87a59adb78d30fe9a414909a8da36ae8df10a"}